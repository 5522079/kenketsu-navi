<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>献血ナビ</title>
    <meta name="description" content="献血ナビは全国の献血状況、献血者数予測、血液在庫情報を提供する献血情報ポータルサイトです。献血に関する基礎知識や近くの献血ルーム・献血バスの探し方まで、献血活動を身近にします。本ページでは献血状況、献血者数予測、血液在庫情報の都道府県マップを提供します。">
    <meta name="keywords" content="献血,献血情報,献血ナビ,血液型,献血ルーム,献血バス,血液在庫,AI予測">
    <meta name="robots" content="index, follow">
    <meta name="author" content="献血ナビ運営チーム">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:title" content="献血ナビ">
    <meta property="og:type" content="website">
    <meta property="og:description" content="献血に関する情報をわかりやすく提供し、誰もが簡単に献血活動に参加できるようサポートすることを目指して活動しています。本ページでは献血状況、献血者数予測、血液在庫情報の都道府県マップを提供します。">
    <meta property="og:url" content="https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/">
    <meta property="og:site_name" content="献血ナビ｜未来のために、今献血を考える">
    <meta property="og:image" content="../static/images/favicon.ico">
    <meta property="og:locale" content="ja_JP">

    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='scripts/js/jmap.js') }}"></script>
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.0/css/all.css">
    <link rel="stylesheet" href="../static/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="shortcut icon" href="../static/images/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="../static/images/favicons/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="icon" type="image/png" href="../static/images/favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="preload" href="../static/images/logo.png" as="image">
    <link rel="canonical" href="https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/prefecture">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CZJWDEN2W5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CZJWDEN2W5');
    </script>

    <!-- 構造化データ -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "献血ナビ",
        "url": "https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/search?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "献血ナビ",
        "url": "https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/",
        "logo": "https://kenketsu-navi-bvf7hwdne8gyaqav.japaneast-01.azurewebsites.net/static/images/logo.png",
        "description": "献血に関する情報をわかりやすく提供し、誰もが簡単に献血活動に参加できるようサポートすることを目指して活動しています。",
        "sameAs": [
          "https://twitter.com/kenketsu_navi",
          "https://www.facebook.com/kenketsunavi"
        ]
      }
    </script>

    <script type = "text/javascript">
        $(document).ready(function() {
            $('#pred-map').jmap({
                showHeatmap: true,
                showInfobox: true,
                heatmapLabelUnit: '%',
                heatmapConditions: ["<=-6", "<0",  ">=0", ">=6"],
                heatmapColors: ["#4394c3", "#d1e5f0", "#fedbc7", "#d65f4e"], 
                onSelect: function(e, data) {
                    // フォームに自動入力
                    $('#prefecture_id').val(data.code);
                    $('#prefecture_name').val(data.name);

                    // フォームを自動送信
                    $('#prefecture_form').submit();
                },
                areas : [
                    {% for data in predict_areas_data %}
                        {code: {{ data.code }}, name: '{{ data.name }}', number: {{ data.number }}},
                    {% endfor %}
                ]
            });
        });
    </script>

    <script type = "text/javascript">
        $(document).ready(function() {
            $('#status-map').jmap({
                showHeatmap: true,
                showInfobox: true,
                heatmapConditions: ["<9", ">=9",  ">=18", ">=27"],
                heatmapColors: ["#4394c3", "#d1e5f0", "#fedbc7", "#d65f4e"], 
                onSelect: function(e, data) {
                    // フォームに自動入力
                    $('#prefecture_id').val(data.code);
                    $('#prefecture_name').val(data.name);

                    // フォームを自動送信
                    $('#prefecture_form').submit();
                },
                areas : [
                    {% for data in status_areas_data %}
                        {code: {{ data.code }}, name: '{{ data.name }}', number: {{ data.number }}},
                    {% endfor %}
                ]
            });
        });
    </script>

    <script type = "text/javascript">
        $(function(){
            var countElm = $('.count'),
                duration = 2000; // 2秒でカウントアップを完了させる

            countElm.each(function(){
                var self = $(this),
                    countMax = parseFloat(self.attr('data')), // data-numから最大値を取得
                    thisCount = 0, // 初期値
                    frameRate = 60, // 1秒間に60フレーム（約16msごとに更新）
                    totalFrames = (duration / 1000) * frameRate, // 2秒間に何回更新するか
                    increment = countMax / totalFrames, // 1フレームごとの増加量
                    countTimer;

                function timer() {
                    countTimer = setInterval(function(){
                        thisCount += increment; // 増加量を追加
                        self.text(Math.floor(thisCount)); // 表示は整数にする

                        if (thisCount >= countMax) { // カウントが最大値を超えたら終了
                            self.text(countMax); // 最終値を正確に表示
                            clearInterval(countTimer);
                        }
                    }, 1000 / frameRate); // 毎秒60回更新
                }
                timer();
            });
        });
    </script>
</head>
<body>
    <header>
        <a href="/"><img src="../static/images/logo.png" alt="献血ナビのロゴ" /></a>
        <div class="header-items">
                <ul>
                    <li><a class="header-item" href="/about">このサイトについて</a></li>
                    <li><a class="header-item" href="/about#contact">お問い合わせ</a></li>
                </ul>
                <div class="hamburger-menu">
                    <input type="checkbox" id="overlay-input" />
                    <label for="overlay-input" id="overlay-button">
                    <span></span>
                    </label>
                    <div id="overlay">
                        <ul>
                            <li><a href="/">トップページ</a></li>
                            <li><a href="/about">このサイトについて</a></li>
                            <li><a href="/about#contact">お問い合わせ</a></li>
                        </ul>
                    </div>
                </div>
        </div>
    </header>
    <ol class="breadcrumb">
        <li><a href="/">TOP</a></li>
        <li>全国</li>
    </ol>
    <div class="main-content">
        <h1 id="predict_ai">献血者数の予測</h1>
        <p class="content-detail">(全国 | {{update}}更新)</p>
        <section class="predict">
            <div class="box">
                <p>2017年から2024年までの献血者数の推移を学習した予測モデルが、3か月先までの献血者数を予測し、適切なタイミングでの献血をサポートします。</p>
                <form id="prefecture_form" action="/prefecture" method="POST">
                    <input type="hidden" id="prefecture_id" name="prefecture_id">
                    <input type="hidden" id="prefecture_name" name="prefecture_name">
                </form>
                <div id="pred-map">
                    <div class="jmap-infobox">
                        <p>地図をクリックすると、「都道府ごとのデータ」がご覧いただけます。</p>
                        <div class="category">
                            <div class="color-box increase-large"></div>
                                <div class="description">
                                    昨年比5%以上増加の予測
                                </div>
                        </div>
                        <div class="category">
                            <div class="color-box increase-small"></div>
                                <div class="description">
                                    昨年比わずかに増加の予測
                                </div>
                        </div>
                        <div class="category">
                            <div class="color-box decrease-small"></div>
                                <div class="description">
                                    昨年比わずかに減少の予測
                                </div>
                        </div>
                        <div class="category">
                        <div class="color-box decrease-large"></div>
                            <div class="description">
                                昨年比5%以上減少の予測
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <h1 id="status">現在の献血状況</h1>
        <p class="content-detail">(全国 | {{update}}更新)</p>
        <section class="status">
            <div class="box">
                <p>日本赤十字社が公開している現在の献血状況をまとめ、都道府県ごとに正確な献血状況を把握することができます。</p>
                <form id="prefecture_form" action="/prefecture" method="POST">
                    <input type="hidden" id="prefecture_id" name="prefecture_id">
                    <input type="hidden" id="prefecture_name" name="prefecture_name">
                </form>
                <div id="status-map">
                    <div class="jmap-infobox">
                        <p>地図をクリックすると、「都道府ごとのデータ」がご覧いただけます。</p>
                        <div class="category">
                            <div class="color-box increase-large"></div>
                                <div class="description">
                                    安心です
                                </div>
                        </div>
                        <div class="category">
                            <div class="color-box increase-small"></div>
                                <div class="description">
                                    心配です
                                </div>
                        </div>
                        <div class="category">
                            <div class="color-box decrease-small"></div>
                                <div class="description">
                                    困っています
                                </div>
                        </div>
                        <div class="category">
                        <div class="color-box decrease-large"></div>
                            <div class="description">
                                非常に困ってます
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <h1 id="blood_data">数字で見る献血</h1>
        <p class="content-detail">(全国 | {{update}}更新 | ※2017年1月から集計)</p>
        <section class="data">
            <div class="box">
                <h2>これまで献血に協力していただいた人数</h2>
                <div class="image-container">
                    <img src="../static/images/data-people.png" alt="これまで献血に協力していただいた人数" />
                </div>
                <p><span class="count" data="{{total_blood_donors}}">0</span>人</p>
            </div>
            <div class="box">
                <h2>これまでに献血された血液の総量</h2>
                <div class="image-container">
                    <img src="../static/images/data-blood.png" alt="これまでに献血された血液の総量" />
                </div>
                <p><span class="count" data="{{total_blood}}">0</span>kL</p>
            </div>
            <div class="box">
                <h2>献血ルームの総数</h2>
                <div class="image-container">
                    <img src="../static/images/data-room.png" alt="献血ルームの総数" />
                </div>
                <p><span class="count" data="{{total_rooms}}">0</span>箇所</p>
            </div>
        </section>
    </div>
    <footer>
    <ul class="footer-items">
        <li><a class="footer-item" href="/about">このサイトについて</a></li>
        <li><a class="footer-item" href="/about#contact">お問い合わせ</a></li>
        <li><a class="footer-item" href="/about#used">使用しているデータについて</a></li>
    </ul>
        <p class="copyright">© 2025 献血ナビ</p>
    </footer>
</body>
</html>
